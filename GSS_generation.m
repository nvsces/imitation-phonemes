function out_norm=GSS_generation(t,f,mas)
if nargin<3
    mas=1:32;
end

F=[0 0 0 0 0; ...
   0 0 0 0 1;...
   0 0 0 1 0;...
   0 0 0 1 1;...
   0 0 1 0 0;...
   0 0 1 0 1;...
   0 0 1 1 0;...
   0 0 1 1 1;...
   0 1 0 0 0;...
   0 1 0 0 1;...
   0 1 0 1 0;...
   0 1 0 1 1;...
   0 1 1 0 0;...
   0 1 1 0 1;...
   0 1 1 1 0;...
   0 1 1 1 1;...
   1 0 0 0 0;...
   1 0 0 0 1;...
   1 0 0 1 0;...
   1 0 0 1 1;...
   1 0 1 0 0;...
   1 0 1 0 1;...
   1 0 1 1 0;...
   1 0 1 1 1;...
   1 1 0 0 0;...
   1 1 0 0 1;...
   1 1 0 1 0;...
   1 1 0 1 1;...
   1 1 1 0 0;...
   1 1 1 0 1;...
   1 1 1 1 0;...
   1 1 1 1 1];

F=F(mas,:);

Sum_out=zeros(size(F,1),size(t,2));
for j=1:size(F,1)
    A=10;
    for i=1:size(F,2)
        Sum_out(j,:)=Sum_out(j,:)+F(j,i).*A.*sin(2*pi.*f(i)*t);
    end
end
won=find(mas==1);
if ~isempty(won)
    Sum_out(won,:)=repmat(A, 1, size(t,2));
end
out=Sum_out;
out_sum=zeros(size(out,1),length(t));
for k=1:size(out,1)
    summa=sum(abs(out),2);
    out_sum(k,:) = repmat(summa(k), 1, length(t));
end
out_norm = out ./ out_sum;
out_norm=out_norm';
end